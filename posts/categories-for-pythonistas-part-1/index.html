<!DOCTYPE html>
<html prefix="" lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width">
<title>Categories for Pythonistas - Part 1 | WifiCIDR Blog</title>
<link href="../../assets/css/all-nocdn.css" rel="stylesheet" type="text/css">
<link rel="alternate" type="application/rss+xml" title="RSS" href="../../rss.xml">
<link rel="canonical" href="https://blog.wificidr.net/posts/categories-for-pythonistas-part-1/">
<!--[if lt IE 9]><script src="../../assets/js/html5.js"></script><![endif]--><meta name="author" content="Daniel Justice">
<meta property="og:site_name" content="WifiCIDR Blog">
<meta property="og:title" content="Categories for Pythonistas - Part 1">
<meta property="og:url" content="https://blog.wificidr.net/posts/categories-for-pythonistas-part-1/">
<meta property="og:description" content="Categories for Pythonistas, Part 1¶This is an attempt to translate Category Theory Concepts to Python based on the material at http://brendanfong.com/programmingcats.html.  Haskell and Python are very">
<meta property="og:type" content="article">
<meta property="article:published_time" content="2020-04-17T10:02:08-05:00">
</head>
<body>
    

    <header id="header" class="navbar"><div class="container">
            
    <div class="brand">

        <div class="brand-text">
            <a href="https://blog.wificidr.net/" title="WifiCIDR Blog" rel="home">
                WifiCIDR Blog
            </a>
        </div>

        <a id="btn-toggle-nav" class="navbar-toggle">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </a>
    </div>

            
    <nav class="navbar-collapse collapse"><ul class="nav">
<li><a href="../../archive.html">Archive</a></li>
                <li><a href="../../categories/">Tags</a></li>
                <li><a href="../../rss.xml">RSS feed</a></li>
    
    
    </ul></nav>
</div>
    </header><div class="header-padding"> </div>

    
    <div class="post-header">
        <div class="container">
            <div class="title">
                Categories for Pythonistas - Part 1
            </div>
        </div>
    </div>

    <div class="post-meta">
      <div class="container">
	<div class="meta clearfix">
	  <div class="authordate">
	    <time class="timeago" datetime="2020-04-17T10:02:08-05:00">%2020/%2/%17</time>
	    

	    
          |  
        <a href="index.ipynb" id="sourcelink">Source</a>

	  </div>
	  <div class="post-tags">
	  </div>
	</div>
      </div>
    </div>
    
    
    <div id="post-main" class="main">
        <div class="container">
        <div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h2 id="Categories-for-Pythonistas,-Part-1">Categories for Pythonistas, Part 1<a class="anchor-link" href="#Categories-for-Pythonistas,-Part-1">¶</a>
</h2>
<p>This is an attempt to translate Category Theory Concepts to Python based on the material at <a href="http://brendanfong.com/programmingcats.html">http://brendanfong.com/programmingcats.html</a>.  Haskell and Python are very different languages, but I hope that many of the techniques taught will be applicable to more general cases.  It is assumed that you are already comfortable coding in Python and have some experience with its functional features.  Mathematics and computer science are riddled with jargon and cryptic symbols.  We will do our best to communicate in the vernacular as much as possible, but there is great value to learning the language of this domain.  The terseness found in many texts is best appreciated through practice and application.</p>
<p>The section numbers will follow the section numbers in the document <a href="http://brendanfong.com/programmingcats_files/cats4progs-DRAFT.pdf">http://brendanfong.com/programmingcats_files/cats4progs-DRAFT.pdf</a></p>
<h3 id="Sets-and-functions,-section-1.1">Sets and functions, section 1.1<a class="anchor-link" href="#Sets-and-functions,-section-1.1">¶</a>
</h3>
<p>The first thing we need to realize is that Python is not a purely functional language, nor is it strongly typed.  These two facts may feel like stuffing a square peg through a round hole, so we will do our best to sand down the edges first!</p>
<p>Functions or methods in Python are not always "pure"; they may produce side effects - and this is a critcal distinction.  Pure functions are like the functions you learned about in grade school math.  You can compute <code>x + y</code> with the same arugments and <em>always</em> get the same result.  Side effects come into play with any kind of I/O.  Think database operations, network operations, things of this sort.  Pure functions can be memoized; their results can be safely cachced.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [39]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">add3</span><span class="p">(</span><span class="n">x</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">"""A pure function that adds 3 to an integer"""</span>
    <span class="c1"># Always returns the same result with the same inputs</span>
    <span class="k">return</span> <span class="n">x</span> <span class="o">+</span> <span class="mi">3</span>

<span class="nb">print</span><span class="p">(</span><span class="n">add3</span><span class="p">(</span><span class="mi">2</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>5
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>One thing to note almost immediately is that there is no practical way to enforce typing in Python.  The type annotations express my <em>intent</em>, but we cannot prevent users from calling <code>add</code> like <code>add({"foo": "bar"}, 42)</code>.</p>
<p>The next example demonstrates a function with side effects.  <code>input</code> can have unpredictable behavior, and the cast <code>int(num)</code> will fail on certain inputs (we call these partial functions).  <code>get_number_from_user</code> may fail to return in many different ways.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [40]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="kn">from</span> <span class="nn">typing</span> <span class="k">import</span> <span class="n">Optional</span>
<span class="k">def</span> <span class="nf">get_number_from_user</span><span class="p">()</span> <span class="o">-&gt;</span> <span class="n">Optional</span><span class="p">[</span><span class="nb">int</span><span class="p">]:</span>
    <span class="sd">"""This function has side effects!"""</span>
    <span class="c1"># The user could send us anything... or hit ctrl+c</span>
    <span class="c1"># num = input("Enter a number: ")</span>
    <span class="n">num</span> <span class="o">=</span> <span class="s2">"abc"</span>
    <span class="nb">print</span><span class="p">(</span><span class="n">f</span><span class="s2">"the input type: {type(num)}"</span><span class="p">)</span>
    <span class="c1"># try/except just to keep the cells running for now</span>
    <span class="k">try</span><span class="p">:</span>
        <span class="c1"># This is never guaranteed to work</span>
        <span class="k">return</span> <span class="nb">int</span><span class="p">(</span><span class="n">num</span><span class="p">)</span>
    <span class="k">except</span><span class="p">:</span>
        <span class="nb">print</span><span class="p">(</span><span class="s2">"""Exception!!!</span>
<span class="s2">            ---------------------------------------------------------------------------</span>
<span class="s2">            ValueError                                Traceback (most recent call last)</span>
<span class="s2">            &lt;ipython-input-25-e2519f5ea9d5&gt; in &lt;module&gt;</span>
<span class="s2">                  7     return int(num)</span>
<span class="s2">                  8 </span>
<span class="s2">            ----&gt; 9 num = get_number_from_user()</span>

<span class="s2">            &lt;ipython-input-25-e2519f5ea9d5&gt; in get_number_from_user()</span>
<span class="s2">                  5     print(f"the input type: {type(num)}")</span>
<span class="s2">                  6     # This is never guaranteed to work</span>
<span class="s2">            ----&gt; 7     return int(num)</span>
<span class="s2">                  8 </span>
<span class="s2">                  9 num = get_number_from_user()</span>

<span class="s2">            ValueError: invalid literal for int() with base 10: 'abc'</span>
<span class="s2">        """</span><span class="p">)</span>

<span class="n">num</span> <span class="o">=</span> <span class="n">get_number_from_user</span><span class="p">()</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>the input type: &lt;class 'str'&gt;
Exception!!!
            ---------------------------------------------------------------------------
            ValueError                                Traceback (most recent call last)
            &lt;ipython-input-25-e2519f5ea9d5&gt; in &lt;module&gt;
                  7     return int(num)
                  8 
            ----&gt; 9 num = get_number_from_user()

            &lt;ipython-input-25-e2519f5ea9d5&gt; in get_number_from_user()
                  5     print(f"the input type: {type(num)}")
                  6     # This is never guaranteed to work
            ----&gt; 7     return int(num)
                  8 
                  9 num = get_number_from_user()

            ValueError: invalid literal for int() with base 10: 'abc'
        
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>A function $f$ takes an input $x$ and produces an output $y$.  If we apply another function $g$ to $y$, we produce $z$.</p>
$$x \xrightarrow[]{\text{f}} y \xrightarrow[]{\text{g}} z$$<p>In the following example, we are demonstrating morphisms $\mathbb{Z} \rightarrow \mathbb{Z}$, e.g. <code>int</code> -&gt; <code>int</code>, but we can use other categories as well.</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [41]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">multiply2</span><span class="p">(</span><span class="n">a</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="sd">"""A pure function to multiply an integer by 2"""</span>
    <span class="k">return</span> <span class="n">a</span> <span class="o">*</span> <span class="mi">2</span>

<span class="c1"># define x</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">4</span>
<span class="c1"># apply add3</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">add3</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="c1"># apply multiply2</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">multiply2</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>14
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>We can also compose these functions similar to function composition in mathematics.</p>
$$z = (f \circ g)(x)$$<p>Though the notation in python requires nesting function calls as in the following:</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [42]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="c1"># define x</span>
<span class="n">x</span> <span class="o">=</span> <span class="mi">4</span>
<span class="c1"># compose add3 multiply2 after add3</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">multiply2</span><span class="p">(</span><span class="n">add3</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>

<span class="nb">print</span><span class="p">(</span><span class="n">z</span><span class="p">)</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt"></div>


<div class="output_subarea output_stream output_stdout output_text">
<pre>14
</pre>
</div>
</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<p>What about a morphism $\mathbb{Z} \rightarrow \mathbb{B}$?</p>
<p>Let's demonstrate that $x \xrightarrow[]{\text{f}} y \xrightarrow[]{\text{g}} z$ == $(f \circ g)(x)$</p>

</div>
</div>
</div>
<div class="cell border-box-sizing code_cell rendered">
<div class="input">
<div class="prompt input_prompt">In [43]:</div>
<div class="inner_cell">
    <div class="input_area">
<div class=" highlight hl-ipython3"><pre><span></span><span class="k">def</span> <span class="nf">add42</span><span class="p">(</span><span class="n">n</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">int</span><span class="p">:</span>
    <span class="k">return</span> <span class="n">n</span> <span class="o">+</span> <span class="mi">42</span>

<span class="k">def</span> <span class="nf">iseven</span><span class="p">(</span><span class="n">z</span><span class="p">:</span> <span class="nb">int</span><span class="p">)</span> <span class="o">-&gt;</span> <span class="nb">bool</span><span class="p">:</span>
    <span class="k">return</span> <span class="kc">True</span> <span class="k">if</span> <span class="n">z</span> <span class="o">%</span> <span class="mi">2</span> <span class="o">==</span> <span class="mi">0</span> <span class="k">else</span> <span class="kc">False</span>

<span class="n">x</span> <span class="o">=</span> <span class="mi">3</span>
<span class="n">y</span> <span class="o">=</span> <span class="n">add42</span><span class="p">(</span><span class="n">x</span><span class="p">)</span>
<span class="n">z</span> <span class="o">=</span> <span class="n">iseven</span><span class="p">(</span><span class="n">y</span><span class="p">)</span>

<span class="n">z</span> <span class="o">==</span> <span class="n">iseven</span><span class="p">(</span><span class="n">add42</span><span class="p">(</span><span class="n">x</span><span class="p">))</span>
</pre></div>

    </div>
</div>
</div>

<div class="output_wrapper">
<div class="output">


<div class="output_area">

    <div class="prompt output_prompt">Out[43]:</div>




<div class="output_text output_subarea output_execute_result">
<pre>True</pre>
</div>

</div>

</div>
</div>

</div>
<div class="cell border-box-sizing text_cell rendered">
<div class="prompt input_prompt">
</div>
<div class="inner_cell">
<div class="text_cell_render border-box-sizing rendered_html">
<h3 id="Sets-and-functions,-section-1.2">Sets and functions, section 1.2<a class="anchor-link" href="#Sets-and-functions,-section-1.2">¶</a>
</h3>
<p>Section 1.2 of the book is thoroughly covered in freely-available texts on the internet.  Python has support for set operations and this is documented at <a href="https://docs.python.org/3.8/library/stdtypes.html#set-types-set-frozenset">https://docs.python.org/3.8/library/stdtypes.html#set-types-set-frozenset</a>.</p>
<h3 id="Categories,-section-1.3">Categories, section 1.3<a class="anchor-link" href="#Categories,-section-1.3">¶</a>
</h3>
<p>Categories!  :P</p>

</div>
</div>
</div>
</div>
        
    
        
        <script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.1/MathJax.js?config=TeX-AMS-MML_HTMLorMML" integrity="sha256-SDRP1VVYu+tgAGKhddBSl5+ezofHKZeI+OzxakbIe/Y=" crossorigin="anonymous"></script><script type="text/x-mathjax-config">
        MathJax.Hub.Config({tex2jax: {inlineMath: [['$latex ','$'], ['\\(','\\)']]}});
        </script>
</div>
    </div>

    
    <footer><div class="container">
            <div class="social">



                <div class="social-entry">
                    <a href="../../rss.xml" target="_blank">
                        <i class="fa fa-rss"></i> 
                    </a>
                </div>
            </div>
                <div class="copyright">
                    Contents © 2020         <a href="mailto:djustice@wificidr.net">Daniel Justice</a> - Powered by         <a href="https://getnikola.com" rel="nofollow">Nikola</a>         
                    
                </div>
           
        </div>
    </footer><script src="../../assets/js/all-nocdn.js" type="text/javascript"></script>
</body>
</html>
